<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Mon RPG 2D</title>
    <!-- Ordre‚ÄØ: style.css (g√©n√©ral) ‚Üí hud.css (icone inventaire) ‚Üí inventory.css (modale + slots inventaire) ‚Üí equipment.css (slots √©quipement) -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/hud.css">
    <link rel="stylesheet" href="assets/css/inventory.css">
    <link rel="stylesheet" href="assets/css/equipment.css">
    <link rel="stylesheet" href="assets/css/tooltip.css">
    <link rel="stylesheet" href="assets/css/equipment-detail.css">
    <link rel="stylesheet" href="assets/css/loot.css">
    <link rel="stylesheet" href="assets/css/etablie.css">
    <link rel="stylesheet" href="assets/css/etablie-cordonnier.css">
    <link rel="stylesheet" href="assets/css/etablie-bijoutier.css">
    <link rel="stylesheet" href="assets/css/metier.css">
    <link rel="stylesheet" href="assets/css/sort.css">
    <link rel="stylesheet" href="assets/css/menu.css">
    <link rel="stylesheet" href="assets/css/pnj.css">
    <link rel="stylesheet" href="assets/css/quetes.css">
    

    <!-- Charger utils.js en tout premier pour les fonctions globales -->
    <script src="js/core/utils.js"></script>
    
    <!-- Charger les PNJ - ordre important pour les d√©pendances -->
    <script src="js/entities/npcs/core/pnj-base.js"></script>
    <script src="js/entities/npcs/core/pnj-dialogue.js"></script>
    <script src="js/entities/npcs/papi.js"></script>
    <!-- Syst√®me de qu√™tes modulaire -->
    <script src="js/quests/quest-definitions.js"></script>
    <script src="js/quests/quest-logic.js"></script>
    <script src="js/quests/quest-ui.js"></script>
    <script src="js/quests/quests.js"></script>
    <!-- Charger les IA partag√©es des monstres -->
    <script src="js/entities/monsters/ai/passiveAI.js"></script>
    <script src="js/entities/monsters/ai/chasePlayerAI.js"></script>
    <script src="js/entities/monsters/ai/rangedAI.js"></script>
    <script src="js/entities/monsters/ai/flyingAI.js"></script>
    
    <!-- Charger les monstres sp√©cifiques -->
    <script src="js/entities/monsters/slime/slime-basic.js"></script>
    <script src="js/entities/monsters/corbeau/corbeau.js"></script>
    <script src="js/entities/monsters/slime/slime-boss.js"></script>
    
    <!-- Charger la logique des monstres d√©coup√©e -->
    <script src="js/entities/monsters/counters.js"></script>
    <script src="js/entities/monsters/spawn.js"></script>
    <script src="js/entities/monsters/respawn.js"></script>
    <script src="js/entities/monsters/combat.js"></script>
    <script src="js/entities/monsters/core.js"></script>
    <script src="js/entities/monsters/draw.js"></script>
    <script src="js/entities/monsters/ai.js"></script>
    <!-- Charger la logique de progression du donjon -->
    <script src="js/dungeon/dungeon-progression.js"></script>
    <!-- Charger le syst√®me de sauvegarde -->
    <script src="js/save/save-system.js"></script>
    <script src="js/save/saveQuests.js"></script>
    <script src="js/save/loader.js"></script>
    <!-- Charger le syst√®me de sauvegarde des monstres -->
    <script src="js/save/savemonster.js"></script>
    <!-- Charger le syst√®me de menu multi-personnages -->
    <script src="js/ui/menu.js"></script>
</head>
<body>
    <!-- Menu principal de s√©lection de personnages -->
    <div id="character-selection-menu" style="display:none;">
      <div class="menu-box character-selection-box">
        <div class="menu-title">S√©lection du personnage</div>
        <div class="character-slots">
          <div class="character-slot" data-slot="0">
            <div class="slot-content empty-slot">
              <div class="slot-icon">+</div>
              <div class="slot-text">Cr√©er un personnage</div>
            </div>
          </div>
          <div class="character-slot" data-slot="1">
            <div class="slot-content empty-slot">
              <div class="slot-icon">+</div>
              <div class="slot-text">Cr√©er un personnage</div>
            </div>
          </div>
          <div class="character-slot" data-slot="2">
            <div class="slot-content empty-slot">
              <div class="slot-icon">+</div>
              <div class="slot-text">Cr√©er un personnage</div>
            </div>
          </div>
          <div class="character-slot" data-slot="3">
            <div class="slot-content empty-slot">
              <div class="slot-icon">+</div>
              <div class="slot-text">Cr√©er un personnage</div>
            </div>
          </div>
          <div class="character-slot" data-slot="4">
            <div class="slot-content empty-slot">
              <div class="slot-icon">+</div>
              <div class="slot-text">Cr√©er un personnage</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Menu de cr√©ation de personnage -->
    <div id="character-creation-menu" style="display:none;">
      <div class="menu-box character-creation-box">
        <button id="back-to-selection-btn" class="back-btn" title="Retour √† la s√©lection">&#128682;</button>
        <div class="menu-title">Cr√©ation du personnage</div>
        <div class="creation-content">
          <div class="avatar-selection">
            <div class="avatar-options">
              <img class="avatar-option" src="assets/ui/playerinventaire.png" alt="Avatar 1" data-avatar="assets/ui/playerinventaire.png" />
              <img class="avatar-option" src="assets/personnages/player.png" alt="Avatar 2" data-avatar="assets/personnages/player.png" />
              <img class="avatar-option" src="assets/personnages/corbeau.png" alt="Avatar 3" data-avatar="assets/personnages/corbeau.png" />
            </div>
            <div id="preview-name" class="preview-name">&nbsp;</div>
          </div>
          <div class="name-form">
            <label class="form-label" for="character-name-input">Nom du personnage</label>
            <input id="character-name-input" type="text" maxlength="16" autocomplete="off" placeholder="Entrez votre nom..." />
            <button id="create-character-btn" disabled>Cr√©er le personnage</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Menu de confirmation de suppression -->
    <div id="delete-confirm-menu" style="display:none;">
      <div class="menu-box delete-confirm-box">
        <div class="menu-title">Confirmation</div>
        <div class="confirm-content">
          <div class="confirm-icon">‚ö†Ô∏è</div>
          <div class="confirm-text">Voulez-vous vraiment supprimer ce personnage ?</div>
          <div class="confirm-character-info">
            <img id="confirm-avatar" src="" alt="Avatar" />
            <div id="confirm-name"></div>
            <div id="confirm-level"></div>
          </div>
          <div class="confirm-actions">
            <button id="confirm-delete-btn" class="delete-btn">Supprimer</button>
            <button id="cancel-delete-btn" class="cancel-btn">Annuler</button>
          </div>
        </div>
      </div>
    </div>

    <!-- √âcran de chargement -->
    <div id="loading-screen" style="display:none;">
      <div class="loading-content">
        <div class="loading-spinner"></div>
        <div class="loading-text">Chargement en cours...</div>
      </div>
    </div>

    <!-- Bouton Menu en haut √† droite du jeu -->
    <button id="game-menu-btn" style="position:fixed;top:18px;right:24px;z-index:1001;display:none;background:#ffd952;color:#23272e;font-weight:bold;font-size:1.1rem;padding:8px 18px;border-radius:8px;border:none;box-shadow:0 2px 8px #0005;cursor:pointer;">Menu</button>

    <div id="canvas-wrapper" style="position: relative; width: fit-content; margin: 0 auto;">
        <canvas id="gameCanvas" width="1536" height="910"></canvas>
        <div id="hud-layer">
            <div id="inventory-icon"></div>
            <div id="stats-icon">‚≠ê</div>
            <div id="metier-icon">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                    <rect x="18" y="5" width="5" height="22" rx="2.2" fill="#bfa14a" stroke="#684726" stroke-width="2.5"/>
                    <rect x="12" y="2" width="16" height="8" rx="2.5" fill="#8d8d8d" stroke="#684726" stroke-width="2.5"/>
                    <rect x="19.5" y="28" width="2" height="10" rx="1.2" fill="#684726"/>
                </svg>
            </div>
            <div id="quetes-icon"><span>üìã</span></div>
            <div id="sort-icon"><span style="font-size: 2em; line-height: 1;">‚ú®</span></div>
        </div>
    </div>

    <!-- Fen√™tre d'inventaire -->
    <div id="inventory-modal">
        <div id="inventory-modal-content">
            <span id="close-inventory">&times;</span>

            
            <!-- SECTION PECKA (positionnable) -->
            <div id="pecka-section">
                <div class="pecka-display">
                    <div class="pecka-icon">P</div>
                    <div class="pecka-info">
                        <div class="pecka-label">Pecka</div>
                        <div class="pecka-amount" id="pecka-amount">0</div>
                    </div>
                </div>
            </div>
            
            <div id="equipment-container">
                <div class="equip-slot" data-slot="coiffe" title="Coiffe"><div class="slot-icon"></div></div>
                <div class="equip-slot" data-slot="cape" title="Cape"><div class="slot-icon"></div></div>
                <div class="equip-slot" data-slot="amulette" title="Amulette"><div class="slot-icon"></div></div>
                <div class="equip-slot" data-slot="arme" title="Arme"><div class="slot-icon"></div></div>
                <div class="equip-slot" data-slot="bouclier" title="Bouclier"><div class="slot-icon"></div></div>
                <div class="equip-slot" data-slot="ceinture" title="Ceinture"><div class="slot-icon"></div></div>
                <div class="equip-slot" data-slot="bottes" title="Bottes"><div class="slot-icon"></div></div>
                <div class="equip-slot" data-slot="anneau" title="Anneau"><div class="slot-icon"></div></div>
                <img id="player-inventory-img" src="assets/ui/playerinventaire.png" alt="Joueur">
            </div>

            <!-- SECTION STATISTIQUES -->
            <div id="stats-container">
                <h3>Statistiques</h3>
                <div id="stats-grid">
                    <div class="stat-slot" data-stat="force">
                        <div class="stat-header">
                            <div class="stat-icon">üí™</div>
                            <div class="stat-name">Force</div>
                        </div>
                        <div class="stat-value" id="stat-force">1</div>
                        <div class="stat-xp-bar">
                            <div class="stat-xp-fill" id="stat-force-xp"></div>
                        </div>
                        <div class="stat-xp-text" id="stat-force-xp-text">0/10</div>
                    </div>
                    
                    <div class="stat-slot" data-stat="intelligence">
                        <div class="stat-header">
                            <div class="stat-icon">üß†</div>
                            <div class="stat-name">Intelligence</div>
                        </div>
                        <div class="stat-value" id="stat-intelligence">1</div>
                        <div class="stat-xp-bar">
                            <div class="stat-xp-fill" id="stat-intelligence-xp"></div>
                        </div>
                        <div class="stat-xp-text" id="stat-intelligence-xp-text">0/10</div>
                    </div>
                    
                    <div class="stat-slot" data-stat="agilite">
                        <div class="stat-header">
                            <div class="stat-icon">‚ö°</div>
                            <div class="stat-name">Agilit√©</div>
                        </div>
                        <div class="stat-value" id="stat-agilite">1</div>
                        <div class="stat-xp-bar">
                            <div class="stat-xp-fill" id="stat-agilite-xp"></div>
                        </div>
                        <div class="stat-xp-text" id="stat-agilite-xp-text">0/10</div>
                    </div>
                    
                    <div class="stat-slot" data-stat="defense">
                        <div class="stat-header">
                            <div class="stat-icon">üõ°Ô∏è</div>
                            <div class="stat-name">D√©fense</div>
                        </div>
                        <div class="stat-value" id="stat-defense">1</div>
                        <div class="stat-xp-bar">
                            <div class="stat-xp-fill" id="stat-defense-xp"></div>
                        </div>
                        <div class="stat-xp-text" id="stat-defense-xp-text">0/10</div>
                    </div>
                    
                    <div class="stat-slot" data-stat="chance">
                        <div class="stat-header">
                            <div class="stat-icon">üçÄ</div>
                            <div class="stat-name">Chance</div>
                        </div>
                        <div class="stat-value" id="stat-chance">1</div>
                        <div class="stat-xp-bar">
                            <div class="stat-xp-fill" id="stat-chance-xp"></div>
                        </div>
                        <div class="stat-xp-text" id="stat-chance-xp-text">√âquipement</div>
                    </div>
                </div>
            </div>

            <!-- GRILLE + BARRE DE CAT√âGORIES (dans le m√™me bloc) -->
            <div id="inventory-grid-container">
                <div id="inventory-categories">
                    <button class="inventory-tab active" data-category="all" title="Tout">
                        <img src="assets/ui/tout.png" alt="Tout" style="width:32px;height:32px;">
                    </button>
                    <button class="inventory-tab" data-category="equipement" title="√âquipements">üó°Ô∏è</button>
                    <button class="inventory-tab" data-category="potions" title="Potions">üß™</button>
                    <button class="inventory-tab" data-category="ressources" title="Ressources">üåø</button>
                </div>
                
                <div id="inventory-grid">
                  <!-- Les slots seront g√©n√©r√©s en JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- Fen√™tre des statistiques -->
    <div id="stats-modal">
        <div id="stats-modal-content">
            <span id="close-stats">&times;</span>
            <h2>Statistiques du Personnage</h2>
            
            <div id="player-level-section">
                <h3>Niveau du Joueur</h3>
                <div class="level-display">
                    <span class="level-label">Niveau:</span>
                    <span class="level-value" id="player-level">1</span>
                </div>
                <div class="xp-display">
                    <span class="xp-label">Exp√©rience:</span>
                    <div class="xp-bar">
                        <div class="xp-fill" id="player-xp-fill"></div>
                    </div>
                    <span class="xp-text" id="player-xp-text">0/10</span>
                </div>
                <div class="stat-points-display">
                    <span class="stat-points-label">Points √† distribuer:</span>
                    <span class="stat-points-value" id="stat-points-value">0</span>
                </div>
            </div>

            <div id="stats-grid-modal">
                <div class="stat-slot-modal" data-stat="vie">
                    <div class="stat-header-modal">
                        <div class="stat-icon-modal">‚ù§Ô∏è</div>
                        <div class="stat-name-modal">Vie</div>
                    </div>
                    <div class="stat-controls">
                        <button class="stat-btn stat-minus" data-stat="vie">-</button>
                        <div class="stat-value-modal" id="stat-vie-modal">1</div>
                        <button class="stat-btn stat-plus" data-stat="vie">+</button>
                    </div>
                    <div class="stat-xp-bar-modal">
                        <div class="stat-xp-fill-modal" id="stat-vie-xp-modal"></div>
                    </div>
                    <div class="stat-xp-text-modal" id="stat-vie-xp-text-modal">Caract√©ristiques</div>
                </div>
                <div class="stat-slot-modal" data-stat="force">
                    <div class="stat-header-modal">
                        <div class="stat-icon-modal">üí™</div>
                        <div class="stat-name-modal">Force</div>
                    </div>
                    <div class="stat-controls">
                        <button class="stat-btn stat-minus" data-stat="force">-</button>
                        <div class="stat-value-modal" id="stat-force-modal">1</div>
                        <button class="stat-btn stat-plus" data-stat="force">+</button>
                    </div>
                    <div class="stat-xp-bar-modal">
                        <div class="stat-xp-fill-modal" id="stat-force-xp-modal"></div>
                    </div>
                    <div class="stat-xp-text-modal" id="stat-force-xp-text-modal">0/10</div>
                </div>
                
                <div class="stat-slot-modal" data-stat="intelligence">
                    <div class="stat-header-modal">
                        <div class="stat-icon-modal">üß†</div>
                        <div class="stat-name-modal">Intelligence</div>
                    </div>
                    <div class="stat-controls">
                        <button class="stat-btn stat-minus" data-stat="intelligence">-</button>
                        <div class="stat-value-modal" id="stat-intelligence-modal">1</div>
                        <button class="stat-btn stat-plus" data-stat="intelligence">+</button>
                    </div>
                    <div class="stat-xp-bar-modal">
                        <div class="stat-xp-fill-modal" id="stat-intelligence-xp-modal"></div>
                    </div>
                    <div class="stat-xp-text-modal" id="stat-intelligence-xp-text-modal">0/10</div>
                </div>
                
                <div class="stat-slot-modal" data-stat="agilite">
                    <div class="stat-header-modal">
                        <div class="stat-icon-modal">‚ö°</div>
                        <div class="stat-name-modal">Agilit√©</div>
                    </div>
                    <div class="stat-controls">
                        <button class="stat-btn stat-minus" data-stat="agilite">-</button>
                        <div class="stat-value-modal" id="stat-agilite-modal">1</div>
                        <button class="stat-btn stat-plus" data-stat="agilite">+</button>
                    </div>
                    <div class="stat-xp-bar-modal">
                        <div class="stat-xp-fill-modal" id="stat-agilite-xp-modal"></div>
                    </div>
                    <div class="stat-xp-text-modal" id="stat-agilite-xp-text-modal">0/10</div>
                </div>
                
                <div class="stat-slot-modal" data-stat="defense">
                    <div class="stat-header-modal">
                        <div class="stat-icon-modal">üõ°Ô∏è</div>
                        <div class="stat-name-modal">D√©fense</div>
                    </div>
                    <div class="stat-controls">
                        <button class="stat-btn stat-minus" data-stat="defense">-</button>
                        <div class="stat-value-modal" id="stat-defense-modal">1</div>
                        <button class="stat-btn stat-plus" data-stat="defense">+</button>
                    </div>
                    <div class="stat-xp-bar-modal">
                        <div class="stat-xp-fill-modal" id="stat-defense-xp-modal"></div>
                    </div>
                    <div class="stat-xp-text-modal" id="stat-defense-xp-text-modal">0/10</div>
                </div>
                
                <div class="stat-slot-modal" data-stat="chance">
                    <div class="stat-header-modal">
                        <div class="stat-icon-modal">üçÄ</div>
                        <div class="stat-name-modal">Chance</div>
                    </div>
                    <div class="stat-controls">
                        <button class="stat-btn stat-minus" data-stat="chance">-</button>
                        <div class="stat-value-modal" id="stat-chance-modal">1</div>
                        <button class="stat-btn stat-plus" data-stat="chance">+</button>
                    </div>
                    <div class="stat-xp-bar-modal">
                        <div class="stat-xp-fill-modal" id="stat-chance-xp-modal"></div>
                    </div>
                    <div class="stat-xp-text-modal" id="stat-chance-xp-text-modal">√âquipement</div>
                </div>
                
                <div class="stat-slot-modal" data-stat="vitesse">
                    <div class="stat-header-modal">
                        <div class="stat-icon-modal">üèÉ</div>
                        <div class="stat-name-modal">Vitesse</div>
                    </div>
                    <div class="stat-controls">
                        <button class="stat-btn stat-minus" data-stat="vitesse">-</button>
                        <div class="stat-value-modal" id="stat-vitesse-modal">1</div>
                        <button class="stat-btn stat-plus" data-stat="vitesse">+</button>
                    </div>
                    <div class="stat-xp-bar-modal">
                        <div class="stat-xp-fill-modal" id="stat-vitesse-xp-modal"></div>
                    </div>
                    <div class="stat-xp-text-modal" id="stat-vitesse-xp-text-modal">Caract√©ristiques</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Fen√™tre d√©taill√©e de l'√©quipement -->
    <div id="equipment-detail-modal">
        <div id="equipment-detail-content">
            <div id="equipment-detail-header">
                <span id="close-equipment-detail">&times;</span>
                <h2 id="equipment-detail-title">D√©tails de l'√âquipement</h2>
            </div>
            
            <div id="equipment-detail-info">
                <div class="equipment-detail-section">
                    <h3>Informations</h3>
                    <div class="equipment-detail-row">
                        <span class="detail-label">Cat√©gorie:</span>
                        <span class="detail-value" id="equipment-name">-</span>
                    </div>
                    <div class="equipment-detail-row">
                        <span class="detail-label">Type:</span>
                        <span class="detail-value" id="equipment-type">-</span>
                    </div>
                    <div class="equipment-detail-row">
                        <span class="detail-label">Raret√©:</span>
                        <span class="detail-value" id="equipment-rarity">-</span>
                    </div>
                </div>
                
                <div class="equipment-detail-section">
                    <h3>Statistiques</h3>
                    <div class="equipment-detail-row">
                        <span class="detail-label">Force:</span>
                        <span class="detail-value" id="equipment-force">-</span>
                    </div>
                    <div class="equipment-detail-row">
                        <span class="detail-label">Intelligence:</span>
                        <span class="detail-value" id="equipment-intelligence">-</span>
                    </div>
                    <div class="equipment-detail-row">
                        <span class="detail-label">Agilit√©:</span>
                        <span class="detail-value" id="equipment-agilite">-</span>
                    </div>
                    <div class="equipment-detail-row">
                        <span class="detail-label">D√©fense:</span>
                        <span class="detail-value" id="equipment-defense">-</span>
                    </div>
                    <div class="equipment-detail-row">
                        <span class="detail-label">Vie:</span>
                        <span class="detail-value" id="equipment-vie">-</span>
                    </div>
                    <div class="equipment-detail-row">
                        <span class="detail-label">Chance:</span>
                        <span class="detail-value" id="equipment-chance">-</span>
                    </div>
                    <div class="equipment-detail-row">
                        <span class="detail-label">Vitesse:</span>
                        <span class="detail-value" id="equipment-vitesse">-</span>
                    </div>
                </div>
                
                <div class="equipment-detail-section">
                    <h3>Description</h3>
                    <div class="equipment-description" id="equipment-description">-</div>
                </div>
            </div>
            
            <div id="equipment-detail-actions">
                <button id="equip-button" class="equipment-action-btn">√âquiper</button>
                <button id="unequip-button" class="equipment-action-btn">D√©s√©quiper</button>
            </div>
        </div>
    </div>

    <!-- Fen√™tre des sorts -->
    <div id="sort-modal">
      <div id="sort-modal-content">
        <span id="close-sort-modal">&times;</span>
        <div class="sort-main">
          <div class="sort-list">
            <div class="sort-row selected" id="sort-punch-row">
              <span class="sort-row-icon">üëä</span>
              <span class="sort-row-name">Coup de poing</span>
            </div>
            <div class="sort-row" id="sort-doublepunch-row">
              <span class="sort-row-icon" style="margin-left: 18px;">üëä<span style="margin-left:6px; margin-right:32px;">üí•</span></span>
              <span class="sort-row-name">Coup de poing explosif</span>
            </div>
            <!-- D'autres sorts viendront ici -->
          </div>
          <div class="sort-damage-panel" id="sort-damage-panel-punch">
            <div class="sort-detail-level sort-detail-level-centered">
              <span class="sort-detail-level-label">Niveau requis :</span> <span class="sort-detail-level-star">‚≠ê 1</span>
            </div>
            <div class="sort-detail-header sort-detail-header-left">
              <span class="sort-detail-icon">üëä</span>
              <span class="sort-detail-name">Coup de poing</span>
            </div>
            <p class="sort-desc">Un coup simple mais efficace.</p>
            <div class="sort-detail-row sort-detail-row-punch">
              <span class="sort-detail-damage-label">D√©g√¢ts :</span>
              <span class="sort-detail-damage-value">3-6</span>
              <span class="sort-detail-damage-icon">üí•</span>
            </div>
            <div class="sort-upgrade-slots sort-upgrade-slots-punch">
              <div class="sort-upgrade-slot"></div>
              <div class="sort-upgrade-slot"></div>
              <div class="sort-upgrade-slot"></div>
              <div class="sort-upgrade-slot"></div>
              <div class="sort-upgrade-slot"></div>
            </div>
          </div>
          <div class="sort-damage-panel" id="sort-damage-panel-explosive" style="display:none;">
            <div class="sort-detail-level sort-detail-level-centered">
              <span class="sort-detail-level-label">Niveau requis :</span> <span class="sort-detail-level-star">‚≠ê 3</span>
            </div>
            <div class="sort-detail-header sort-detail-header-left">
              <span class="sort-detail-icon">üëä<span style='margin-left:6px;'>üí•</span></span>
              <span class="sort-detail-name">Coup de poing explosif</span>
            </div>
            <p class="sort-desc">Un coup puissant qui explose √† l'impact. Inflige de lourds d√©g√¢ts.</p>
            <div class="sort-detail-row sort-detail-row-explosive">
              <span class="sort-detail-damage-label">D√©g√¢ts :</span>
              <span class="sort-detail-damage-value">12-20</span>
              <span class="sort-detail-damage-icon">üí•</span>
            </div>
            <div class="sort-upgrade-slots sort-upgrade-slots-explosive">
              <div class="sort-upgrade-slot"></div>
              <div class="sort-upgrade-slot"></div>
              <div class="sort-upgrade-slot"></div>
              <div class="sort-upgrade-slot"></div>
              <div class="sort-upgrade-slot"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="spell-shortcut-bar">
      <div class="spell-slot" id="spell-slot-1">
        <span class="spell-icon">üëä</span>
        <span class="spell-cooldown" id="cooldown-1"></span>
      </div>
      <div class="spell-slot" id="spell-slot-2">
        <span class="spell-icon">üëä<span style='margin-left:4px;'>üí•</span></span>
        <span class="spell-cooldown" id="cooldown-2"></span>
      </div>
      <div class="spell-slot empty"></div>
      <div class="spell-slot empty"></div>
      <div class="spell-slot empty"></div>
      <div class="spell-slot empty"></div>
      <div class="spell-slot empty"></div>
      <div class="spell-slot empty"></div>
      <div class="spell-slot empty"></div>
      <div class="spell-slot empty"></div>
    </div>

    <!-- Fen√™tre principale des qu√™tes -->
    <div id="quests-main-modal">
        <div id="quests-main-content">
            <div class="quests-header">
                <div class="quests-title">Journal de Qu√™tes</div>
                <button class="quests-close" id="close-quests-modal">‚úï</button>
            </div>
            <div class="quests-body">
                <div class="quests-tabs">
                    <div class="quest-tab active" data-tab="all">
                        Toutes
                        <span class="quest-tab-count" id="count-all">0</span>
                    </div>
                    <div class="quest-tab" data-tab="available">
                        Disponibles
                        <span class="quest-tab-count" id="count-available">0</span>
                    </div>
                    <div class="quest-tab" data-tab="active">
                        En cours
                        <span class="quest-tab-count" id="count-active">0</span>
                    </div>
                    <div class="quest-tab" data-tab="completed">
                        Termin√©es
                        <span class="quest-tab-count" id="count-completed">0</span>
                    </div>
                </div>
                <div class="quests-list" id="quests-list">
                    <!-- Les qu√™tes seront g√©n√©r√©es dynamiquement ici -->
                </div>
            </div>
        </div>
    </div>

    <!-- JS √† charger en dernier (sauf utils.js et monsters/ d√©j√† charg√©s dans le head) -->
<script src="js/systems/hud.js"></script>
<script src="js/core/pathfinding.js"></script>
<script src="js/entities/player/constants.js"></script>
<script src="js/entities/player/stats.js"></script>
<script src="js/entities/player/combat.js"></script>
<script src="js/entities/player/movement.js"></script>
<script src="js/entities/player/bubbles.js"></script>
<script src="js/entities/player/respawn.js"></script>
<script src="js/entities/player/interaction.js"></script>
<script src="js/entities/player/update.js"></script>
<script src="js/entities/player/main.js"></script>
<script src="js/core/collision.js"></script>
<script src="js/tools/tileset.js"></script>

<script src="js/core/map.js"></script>
<script src="js/core/main.js"></script>
<script src="js/inventory/loader.js"></script>
<script src="js/inventory/grid.js"></script>
<script src="js/inventory/items.js"></script>
<script src="js/inventory/tooltips.js"></script>
<script src="js/inventory/equipment-display.js"></script>
<script src="js/inventory/stats-display.js"></script>
<script src="js/inventory/main.js"></script>
<script src="js/systems/chat.js"></script>
<script src="js/systems/floating-chat.js"></script>
<script src="js/systems/damage-display.js"></script>
<script src="js/systems/equipment-system.js"></script>
<script src="js/systems/loot-system.js"></script>
<script src="js/metier/etablie.js"></script>
<script src="js/metier/niveaudemetier.js"></script>


</body>
</html>
